# 依赖注入与控制反转

## 概念

首先是一些相关概念名词。

 - 依赖倒置原则（DIP）：一种软件架构设计的原则（抽象概念）。
 - 控制反转（IoC）：一种反转流、依赖和接口的方式（DIP的具体实现方式）。
 - 依赖注入（DI）：IoC的一种实现方式，用来反转依赖（IoC的具体实现方式）。
 - IoC容器：依赖注入的框架，用来映射依赖，管理对象创建和生存周期（DI框架）。

依赖注入(Dependency Injection)和控制反转(Inversion of Control)是同一个概念。

具体含义是:当某个角色(可能是一个Java实例，调用者)需要另一个角色(另一个Java实例，被调用者)的协助时，在 传统的程序设计过程中，通常由调用者来创建被调用者的实例。但在Spring里，创建被调用者的工作不再由调用者来完成，因此称为控制反转;创建被调用者 实例的工作通常由Spring容器来完成，然后注入调用者，因此也称为依赖注入。

## DIP

依赖倒置原则，其转换了依赖，高层模块不依赖于低层模块的实现，而低层模块依赖于高层模块定义的接口。

概括的讲，就是高层模块定义接口，低层模块负责实现。

**使用DIP的优点:**

 - 系统更柔韧：可以修改一部分代码而不影响其他模块。
 - 系统更健壮：可以修改一部分代码而不会让系统崩溃。
 - 系统更高效：组件松耦合，且可复用，提高开发效率。

## IoC

从上面来看，DIP只是一种软件设计原则，它说明两个模块如何依赖，但并没有说明具体实现的方式。

而IoC则是一种软件设计模式，它说明了DIP的具体实现方式，如何解除相互依赖模块的耦合。

**控制反转（IoC），它为相互依赖的组件提供抽象，将依赖（低层模块）对象的获得交给第三方（系统）来控制，即依赖对象不在被依赖模块的类中直接通过new来获取。**

## DI

是控制反转（IoC）的一种重要实现方式，就是将依赖对象的创建和绑定转移到被依赖对象类的外部来实现。

它将提供一种机制，将需要依赖（低层模块）对象的引用传递给被依赖（高层模块）对象

## IoC容器

对于大型项目来说，相互依赖的组件比较多。如果还用手动的方式，自己来创建和注入依赖的话，显然效率很低，而且往往还会出现不可控的场面。正因如此，IoC容器诞生了。

IoC容器实际上是一个DI框架，它能简化我们的工作量。它包含以下几个功能：

 - 动态创建、注入依赖对象。
 - 管理对象生命周期。
 - 映射依赖关系。

## 总结

DIP是软件设计的一种思想，IoC则是基于DIP衍生出的一种软件设计模式。DI是IoC的具体实现方式之一，使用最为广泛。IoC容器是DI构造函注入的框架，它管理着依赖项的生命周期以及映射关系。