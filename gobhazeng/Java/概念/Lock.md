# CAS

**本质属于一种乐观锁的实现。**

CAS是英文单词Compare And Swap的缩写，翻译过来就是比较并替换。

CAS机制当中使用了3个基本操作数：内存地址V，旧的预期值E，要修改的新值N。只有当V的值等于E时，才会将V的值修改为N。如果V的值不等于E，说明已经被其他线程修改了，当前线程可以放弃此操作，也可以再次尝试次操作直至修改成功。基于这样的算法，CAS操作即使没有锁，也可以发现其他线程对当前线程的干扰（临界区值的修改），并进行恰当的处理。

> volatile：当前线程可以发现其他线程对临界区数据的修改是使用volatile进行保证的。volatile实现了JMM中的可见性，使得对临界区资源的修改可以马上被其他线程看到，它是通过添加内存屏障实现的。

> 扩展：CAS用于JVM堆内存对象分配，即：指针碰撞+空闲列表，同时使用TLAB加速，防止CAS过度消耗CPU性能。

# AQS